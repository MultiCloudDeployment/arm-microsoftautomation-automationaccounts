{
 "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
 "contentVersion": "1.0.0.1",
 "parameters": {
  "name":{
   "type": "string"
  },
  "location": {
   "type": "string"
  },
  "tags": {
   "type": "object"
  },
  "SkuName": {
   "type": "string",
   "allowedValues": [
    "Free",
    "Basic"
   ],
   "defaultValue": "Free"
  },
  "DisableLocalAuth": {
   "type": "bool",
   "defaultValue": false
  },
  "PublicNetworkAccess": {
   "type": "bool",
   "defaultValue": true
  }
 },
 "variables": {
  "ArmResource": {
   "type": "Microsoft.Automation/automationAccounts",
   "apiVersion": "2021-06-22",
   "name": "[parameters('name')]",
   "location": "[parameters('location')]",
   "tags": "[parameters('tags')]",
   "properties": {
    "disableLocalAuth": "[parameters('DisableLocalAuth')]",
    "publicNetworkAccess": "[parameters('PublicNetworkAccess')]",
    "sku": {
     "name": "[parameters('SkuName')]"
    }
   }
  }
 },
 "resources": [
  {
   "type": "Microsoft.Resources/deployments",
   "apiVersion": "2021-04-01",
   "name": "[concat(parameters('name'), '-deployment')]",
   "properties": {
    "mode": "Incremental",
    "template": {
     "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
     "contentVersion": "1.0.0.1",
     "parameters": {},
     "variables": {},
     "resources": "[createArray(variables('ArmResource'))]",
     "outputs": {}
    }
   }
  }
 ],
 "outputs": {
  "armTemplate": {
   "type": "object",
   "value": {
    "$schema": "https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.1",
    "parameters": {},
    "variables": {},
    "resources": "[createArray(variables('ArmResource'))]",
    "outputs": {}
   }
  }
 }
}